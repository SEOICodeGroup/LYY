#include <cstdio>
#include <cassert>
#include <cstring>
#include <algorithm>
using namespace std;
#define REP(i,a,n) for (int i=a;i<=n;i++)
#define PER(i,a,n) for (int i=n;i>=a;i--)
#define MEM(a,b) memset(a,b,sizeof(a))
#define PAUSE system("pause")
#define DEBUG
typedef long long ll;
const ll mod=1000000007;
ll N,s[405],ans,DP[405][405];
inline ll read() {
	char ch=getchar(); ll re=0; while (ch<'0'||ch>'9') ch=getchar();
	while (ch>='0'&&ch<='9') {re=re*10+ch-'0'; ch=getchar();} return re;
}

inline void input() {
	scanf("%lld",&N);
	REP(i,1,N) s[i]=read();//s[2*N-i+1]=s[i];
	//sort(s+1,s+N+1);
	REP(i,1,N) s[N+i]=s[i];
	return;
}

inline void solve() {
	REP(d,2,N) REP(i,1,2*N) {int j=i+d; REP(k,i+1,j-1) DP[i][j]=max(DP[i][j],DP[i][k]+DP[k][j]+s[i]*s[j]*s[k]);ans=max(ans,DP[i][j]);}
	REP(i,1,2*N) REP(j,1,2*N) printf("%d %d %lld\n",i,j,DP[i][j]);
	printf("%lld\n",ans);
}

int main() {
	#ifdef FILE
	freopen("in.txt","r",stdin);
	freopen("out.txt","w",stdout);
	#endif
	input();
	solve();
	PAUSE;
	return 0;
}
//31182687
//7
//23 17 212 113 71 301 33
/*1 1 0
1 2 82892
1 3 633880
1 4 2129964
1 5 11176247
1 6 11975275
1 7 12087423
1 8 0
1 9 0
1 10 0
1 11 0
1 12 0
1 13 0
1 14 0
2 1 0
2 2 0
2 3 407252
2 4 1956760
2 5 10710483
2 6 11850407
2 7 11975275
2 8 12036543
2 9 0
2 10 0
2 11 0
2 12 0
2 13 0
2 14 0
3 1 0
3 2 0
3 3 0
3 4 1700876
3 5 9625679
3 6 11731475
3 7 11892383
3 8 11975275
3 9 25503419
3 10 0
3 11 0
3 12 0
3 13 0
3 14 0
4 1 0
4 2 0
4 3 0
4 4 0
4 5 2414923
4 6 3537352
4 7 3623119
4 8 3667302
4 9 11975275
4 10 15818744
4 11 0
4 12 0
4 13 0
4 14 0
5 1 0
5 2 0
5 3 0
5 4 0
5 5 0
5 6 705243
5 7 759132
5 8 786893
5 9 6880248
5 10 11975275
5 11 13492616
5 12 0
5 13 0
5 14 0
6 1 0
6 2 0
6 3 0
6 4 0
6 5 0
6 6 0
6 7 228459
6 8 346150
6 9 2349596
6 10 9560352
6 11 11975275
6 12 31182687
6 13 0
6 14 0
7 1 0
7 2 0
7 3 0
7 4 0
7 5 0
7 6 0
7 7 0
7 8 12903
7 9 243800
7 10 1034348
7 11 2441392
7 12 11975275
7 13 12303064
7 14 0
8 1 0
8 2 0
8 3 0
8 4 0
8 5 0
8 6 0
8 7 0
8 8 0
8 9 82892
8 10 633880
8 11 2129964
8 12 11176247
8 13 11975275
8 14 0
9 1 0
9 2 0
9 3 0
9 4 0
9 5 0
9 6 0
9 7 0
9 8 0
9 9 0
9 10 407252
9 11 1956760
9 12 10710483
9 13 11850407
9 14 0
10 1 0
10 2 0
10 3 0
10 4 0
10 5 0
10 6 0
10 7 0
10 8 0
10 9 0
10 10 0
10 11 1700876
10 12 9625679
10 13 11731475
10 14 0
11 1 0
11 2 0
11 3 0
11 4 0
11 5 0
11 6 0
11 7 0
11 8 0
11 9 0
11 10 0
11 11 0
11 12 2414923
11 13 3537352
11 14 0
12 1 0
12 2 0
12 3 0
12 4 0
12 5 0
12 6 0
12 7 0
12 8 0
12 9 0
12 10 0
12 11 0
12 12 0
12 13 705243
12 14 0
13 1 0
13 2 0
13 3 0
13 4 0
13 5 0
13 6 0
13 7 0
13 8 0
13 9 0
13 10 0
13 11 0
13 12 0
13 13 0
13 14 0
14 1 0
14 2 0
14 3 0
14 4 0
14 5 0
14 6 0
14 7 0
14 8 0
14 9 0
14 10 0
14 11 0
14 12 0
14 13 0
14 14 0
*/